## 引用计数和原始指针

待补充：添加定制指针和 `Deref` 特征的讨论（此处不表，后文再讲）

到目前，我们已经讲了独占和借用指针。独占指针和 C++ 中的 `std::unique_ptr` 很相似，借用引用则是 C++ 中用指针和引用时常使用的“默认”指针（译者注：原始指针）。Rust 的语言或库中带有几个更罕见的指针。这些指针和 C++ 中习惯使用的多种智能指针大体相似。

这篇文章花了不少时间完成，但我还是不满意。内容不严谨的地方很多，不只是我行文如此，Rust 自身也是如此。希望后文中，随着语言发展，读者可以理解更透彻。在学习 Rust 时，你可能想现在跳过这一段，希望你用不着。这篇文章只是为了保证后文介绍其他指针类型时内容的完整性。

你或许会觉得 Rust 有很多指针类型，但一旦思考库中带有的多种指针类型，就会发现和 C++ 挺类似的。然而 Rust 中，你更容易在初学这门语言时遇到这些东西。因为 Rust 指针有着编译器支持，因此使用时更难犯错。

我不打算像独占和借用指针那样深入介绍，因为坦白地说，本文的指针没那么重要。之后可能会详述。

## Rc<T>

引用计数指针作为 Rust 标准库的一部分出现。此设施在 `std::rc` 模块中（马上讲模块。模块是例子中 `use` 语句的原因）。指向 `T` 类型对象的引用计数指针类型为 `Rc<T>`。使用静态方法创建引用计数指针（现在你可以认为和 C++ 的类似，但是后面就会知道二者有点不同）——`Rc::new(...)` 接收值，用于创建指向值的指针。这一构造方法遵循了 Rust 常用的移动 / 复制语义（和之前独占指针中讨论的类似）：无论复制还是移动，调用了 `Rc::new` 之后，便可以通过指针访问值。

对于其他指针类型，`.` 运算符会按需进行所有的解引用。可以使用 `*` 手动解引用。

要传递引用计数指针，需要使用 `clone` 方法。这事有点烂，但愿我们能改好，可惜，这事可不好说。